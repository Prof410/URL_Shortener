#  URL Shortener

import requests
# Эта строка импортирует библиотеку requests, которая позволяет отправлять HTTP-запросы используя Python. Библиотека упрощает взаимодействие с веб-сервисами и обработку ответов от них.

# Функция для сокращения ссылки с помощью API TinyURL
def shorten_url(url):
    # Здесь определяется функция shorten_url, которая принимает один параметр url — это полный URL, который нужно сократить.
    api_url = 'http://tinyurl.com/api-create.php?url='
    # Эта строка создаёт переменную api_url, содержащую URL API TinyURL для сокращения ссылок. В этот URL будет добавлен исходный URL, который необходимо сократить.
    response = requests.get(api_url + url)
    #  С помощью метода get из библиотеки requests отправляется GET-запрос к API TinyURL. К базовому URL API добавляется исходный URL url, и происходит запрос на его сокращение.
    return response.text
    # Полученный ответ от сервера (response) содержит сокращённый URL как текст. Этот текст возвращается из функции в место её вызова.

# Основная программа
if __name__ == "__main__":
# Эта проверка обеспечивает выполнение кода только в том случае, если скрипт запущен как основная программа, а не импортирован как модуль в другой скрипт.
    original_url = input("Введите URL-адрес для сокращения: ")
    # Здесь пользователю предлагается ввести URL для сокращения, который затем сохраняется в переменной original_url.
    try:
    # Использование try позволяет обрабатывать возможные исключения, которые могут возникнуть в процессе выполнения кода внутри блока try
        shortened_url = shorten_url(original_url)
        # Вызов функции shorten_url, передаём ей original_url и сохраняем полученный сокращённый URL в shortened_url.
        print("Сокращённая ссылка:", shortened_url)
        # Выводим сокращённый URL в консоль.
    except Exception as e:
        print("Произошла ошибка при сокращении URL:", e)
        # Если во время работы программы возникает исключение, его обрабатывают в блоке except, и выводится сообщение об ошибке.
        # Переменная e содержит информацию об исключении, которое было поймано.
